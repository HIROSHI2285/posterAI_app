# API料金と制限

**最終更新**: 2025年12月26日

PosterAIアプリケーションで使用しているAI APIの料金と制限についてまとめています。

---

## 📊 使用中のAIモデル

### 1. 画像生成（ポスター作成）

**モデル**: `imagen-4.0-generate-001` (Imagen 4.0 Standard)

#### 料金

| 解像度 | 価格/枚 |
|--------|---------|
| 1K-2K (最大2048px) | **$0.04** (約6円) |

#### 回数制限

**アプリケーション側の制限**:
- ✅ **100リクエスト/分** （レート制限実装済み）
- ✅ IPアドレスごとに管理
- ⚠️ 制限超過時は429エラー

**Google API側の制限**:
- 無料枠: なし（すべて有料）
- レート制限: 明示的な制限なし（標準的な使用では問題なし）

**推奨使用量**:
- 通常使用: 1日100枚以内
- テスト時: 1分100枚以内

#### 特徴

- ✅ 最高品質のテキストレンダリング（95%精度）
- ✅ 2K解像度対応
- ✅ ポスター生成に最適化

---

### 2. 画像解析（サンプル画像からデザイン抽出）

**モデル**: `gemini-3-pro-image-preview` (Gemini 3 Pro Image Preview)

#### 料金

| 項目 | 価格 |
|------|------|
| テキスト入力 | $2.00 / 100万トークン |
| 画像入力 | 560トークン = $0.0011/画像 |
| 出力（テキスト） | $12.00 / 100万トークン |

**1回の画像解析**: 約 **$0.006** (約1円)

内訳：
```
画像入力: $0.0011
プロンプト: $0.0005
出力（詳細説明）: $0.0048
合計: 約 $0.006
```

#### 回数制限

**アプリケーション側の制限**:
- ✅ **100リクエスト/分** （レート制限実装済み）
- ✅ IPアドレスごとに管理
- ⚠️ 制限超過時は429エラー

**Google API側の制限**:
- 無料枠: なし（すべて有料）
- 入力: 最大200,000トークン
- 出力: 最大8,192トークン

**推奨使用量**:
- 通常使用: 1日50回以内
- テスト時: 1分100回以内

#### 特徴

- ✅ 高精度な画像理解
- ✅ 詳細なデザイン要素抽出
- ✅ 800-1500文字の詳細説明生成

---

## 💰 月間コスト試算

### 使用パターン別

#### 軽量使用（個人・テスト）
```
画像生成: 50枚/月 × $0.04 = $2.00 (約300円)
画像解析: 20回/月 × $0.006 = $0.12 (約18円)
合計: $2.12/月 (約318円)
```

#### 中程度使用（小規模ビジネス）
```
画像生成: 200枚/月 × $0.04 = $8.00 (約1,200円)
画像解析: 100回/月 × $0.006 = $0.60 (約90円)
合計: $8.60/月 (約1,290円)
```

#### 大量使用（本格運用）
```
画像生成: 1,000枚/月 × $0.04 = $40.00 (約6,000円)
画像解析: 500回/月 × $0.006 = $3.00 (約450円)
合計: $43.00/月 (約6,450円)
```

---

## 🔄 モデル比較（参考）

### 画像生成モデル

| モデル | 解像度 | テキスト精度 | 価格/枚 | 推奨度 |
|--------|--------|------------|---------|--------|
| **Imagen 4.0 Standard** | 2K | 95% | **$0.04** | **使用中** ✅ |
| Imagen 4.0 Fast | 2K | 95% | $0.02 | 高速重視 |
| Imagen 4.0 Ultra | 2K | 95% | $0.06 | 最高品質 |
| Imagen 3.0 | 1K | 70% | $0.03 | 旧世代 |

### 画像解析モデル

| モデル | 精度 | 価格/回 | 速度 | 推奨度 |
|--------|------|---------|------|--------|
| **gemini-3-pro-image-preview** | ⭐⭐⭐⭐ | **$0.006** | ⭐⭐⭐ | **使用中** ✅ |
| gemini-1.5-pro | ⭐⭐⭐⭐⭐ | $0.003 | ⭐⭐ | 高精度 |
| gemini-1.5-flash | ⭐⭐⭐⭐ | $0.0001 | ⭐⭐⭐⭐ | 低コスト |

---

## ⚠️ 注意事項

### コスト管理

1. **APIキーの保護**
   - 環境変数で管理
   - 絶対にGitにコミットしない
   - 定期的なローテーション推奨

2. **使用量の監視**
   - Google Cloud Consoleで使用量を確認
   - 予算アラートを設定推奨
   - 月次レビュー

3. **レート制限対策**
   - アプリ側でレート制限実装済み（100req/min）
   - 大量処理時はバッチ処理を検討

### 料金変動

- ✅ 料金は2025年12月時点の情報
- ⚠️ Googleが価格を変更する可能性あり
- 📌 定期的な確認が必要

---

## 📝 APIキー設定

### 必要な環境変数

```env
# Gemini API（画像生成 + 画像解析）
GEMINI_API_KEY=your_gemini_api_key_here
```

### APIキーの取得方法

1. [Google AI Studio](https://aistudio.google.com/) にアクセス
2. "Get API Key" をクリック
3. プロジェクトを作成
4. APIキーをコピー
5. `.env` ファイルに設定

---

## 🔗 参考リンク

- [Google AI Studio](https://aistudio.google.com/)
- [Imagen 4.0 公式ドキュメント](https://deepmind.google/technologies/imagen/)
- [Gemini API 料金](https://ai.google.dev/pricing)
- [Vertex AI 料金計算ツール](https://cloud.google.com/products/calculator)

---

## 📞 サポート

料金やAPIに関する質問:
- Google Cloud サポート: https://cloud.google.com/support
- Google AI フォーラム: https://discuss.ai.google.dev/
