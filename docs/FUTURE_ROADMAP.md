# PosterAI 今後の課題と将来ビジョン

## 🎯 プロダクトビジョン

**現在**: 80%完成から85-90%完成ツールへ進化中  
**将来**: 100%完成または完全編集可能なプロフェッショナルツール

---

## 📊 現在の完成度

### 実装済み機能

| 機能 | 完成度 | 状態 |
|------|--------|------|
| AI画像生成 | ✅ 100% | 完成 |
| 画像解析 | ✅ 100% | 完成 |
| テキスト編集 | ✅ 100% | 完成 |
| 画像挿入 | ✅ 100% | 完成 |
| マスク編集 | ✅ 100% | 完成（NEW） |
| アップスケール | ✅ 100% | 完成 |

### 制約事項

**Gemini APIの技術的制約**:
- 生成画像はラスター形式（PNG/JPEG）
- SVGやベクターグラフィックは生成不可
- 生成後のテキスト要素は直接編集不可（画像として固定）

---

## 🚀 今後の課題

### Phase 1: レイヤー化（高優先度）

#### 概要
現在のラスター画像を「レイヤー構造」に分解し、各要素を個別に編集可能にする。

#### 技術的アプローチ

```
現在のワークフロー:
[プロンプト] → [Gemini API] → [単一ラスター画像]

レイヤー化後:
[プロンプト] → [Gemini API] → [背景レイヤー]
                            → [テキストレイヤー（editable）]
                            → [グラフィックレイヤー]
                            → [ロゴレイヤー]
```

#### 実装案

**A. AIベースの要素分離**
- Gemini/Claude等のVision APIで画像を解析
- テキスト領域、グラフィック領域を検出
- 各領域をセグメンテーション

**B. テキスト層のベクター化**
- OCRで検出したテキストをSVGテキスト要素に変換
- フォント推定（Google Fonts等から類似フォント選択）
- 編集可能なテキストレイヤーとして重ねる

**C. 複合エディター**
- 背景：ラスター画像
- テキスト：SVGオーバーレイ（編集可能）
- 最終出力：合成してPNG/SVG出力

#### 想定される課題

| 課題 | 難易度 | 解決策 |
|------|--------|--------|
| フォント特定 | 難 | AI推定 + 類似フォント代替 |
| 正確な位置合わせ | 中 | バウンディングボックス精密計算 |
| スタイル再現 | 難 | シャドウ・グラデーション推定 |
| 日本語対応 | 中 | M PLUS / Noto Sans JP等 |

---

### Phase 2: テンプレート機能

#### 概要
生成したデザインをテンプレートとして保存・再利用。

#### 機能
- デザインの保存（レイアウト、カラー、フォント設定）
- テンプレートからの新規生成
- ユーザー間でのテンプレート共有

---

### Phase 3: リアルタイム編集

#### 概要
生成した画像をドラッグ＆ドロップで直接編集。

#### 機能
- 要素の移動・リサイズ
- テキスト直接入力
- カラー変更
- レイヤー順序変更

---

### Phase 4: 印刷最適化

#### 概要
印刷業者への入稿に最適化した出力。

#### 機能
- CMYK変換
- トリムマーク追加
- 高解像度PDF出力
- 塗り足し領域設定

---

## 📐 技術的検討事項

### レイヤー化の技術選択肢

#### 1. Canvas + Fabric.js
```
メリット: 既存技術、実績あり
デメリット: ベクター出力が難しい
適正: プロトタイプ、Web完結
```

#### 2. SVG + React
```
メリット: ベクター出力、スケーラブル
デメリット: 複雑なエフェクト再現困難
適正: テキスト編集重視
```

#### 3. PDF.js + jsPDF
```
メリット: 印刷最適化
デメリット: 複雑、パフォーマンス
適正: 印刷入稿重視
```

#### 4. Figma Plugin API連携
```
メリット: プロ品質、完全編集
デメリット: 外部依存、API制約
適正: プロフェッショナル用途
```

### 推奨アプローチ

**段階的実装**:
1. まず Fabric.js でプロトタイプ
2. テキスト編集実現後、SVG出力追加
3. 印刷需要あれば PDF出力追加

---

## 🔮 将来の展望

### 短期（3ヶ月）
- [ ] レイヤー化プロトタイプ
- [ ] テキスト要素の直接編集
- [ ] テンプレート保存機能

### 中期（6ヶ月）
- [ ] 完全なレイヤー編集
- [ ] テンプレートマーケットプレイス
- [ ] チーム機能

### 長期（1年）
- [ ] リアルタイムコラボレーション
- [ ] 印刷入稿対応
- [ ] AIアシスタント（デザイン提案）

---

## 📚 参考資料

### レイヤー化関連
- [Fabric.js](http://fabricjs.com/) - Canvas操作ライブラリ
- [Konva.js](https://konvajs.org/) - 2D Canvas Framework
- [Paper.js](http://paperjs.org/) - ベクターグラフィックス

### テキスト検出
- [Tesseract.js](https://tesseract.projectnaptha.com/) - OCR
- [Google Cloud Vision API](https://cloud.google.com/vision) - 画像解析

### PDF生成
- [jsPDF](https://github.com/parallax/jsPDF) - PDF生成
- [react-pdf](https://react-pdf.org/) - React PDF

---

## 📝 更新履歴

| 日付 | 変更内容 |
|------|---------|
| 2026-01-19 | マスク編集機能実装完了 |
| 2026-01-19 | 今後の課題ドキュメント作成 |

---

*Last Updated: 2026-01-19*
